<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NovelHub - Read Novels, Manga & Articles</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #4a6fa5;
            --secondary: #6b8cbc;
            --accent: #ff7e5f;
            --light: #f5f7fa;
            --dark: #2c3e50;
            --gray: #95a5a6;
            --success: #2ecc71;
            --warning: #f39c12;
            --danger: #e74c3c;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
        }

        /* Layout */
        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 250px;
            background-color: var(--primary);
            color: white;
            padding: 20px 0;
            transition: var(--transition);
            box-shadow: var(--shadow);
            z-index: 100;
        }

        .logo {
            text-align: center;
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }

        .logo h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .logo span {
            color: var(--accent);
        }

        .nav-links {
            list-style: none;
            padding: 0 15px;
        }

        .nav-links li {
            margin-bottom: 10px;
        }

        .nav-links a {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            transition: var(--transition);
            cursor: pointer;
        }

        .nav-links a:hover, .nav-links a.active {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .nav-links i {
            margin-right: 12px;
            font-size: 1.2rem;
            width: 24px;
            text-align: center;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        /* Header with Search and Carousel */
        .header {
            margin-bottom: 30px;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e0e0e0;
        }

        .search-bar {
            flex: 1;
            max-width: 500px;
            position: relative;
        }

        .search-bar input {
            width: 100%;
            padding: 12px 20px;
            border-radius: 30px;
            border: 1px solid #ddd;
            font-size: 1rem;
            padding-left: 45px;
            transition: var(--transition);
        }

        .search-bar input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(74, 111, 165, 0.2);
        }

        .search-bar i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }

        .user-actions {
            display: flex;
            align-items: center;
        }

        .user-actions a {
            margin-left: 20px;
            color: var(--dark);
            text-decoration: none;
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .user-actions i {
            font-size: 1.3rem;
        }

        .user-actions .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-left: 15px;
            cursor: pointer;
        }

        /* Carousel */
        .carousel {
            position: relative;
            height: 350px;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .carousel-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: flex-end;
            padding: 30px;
        }

        .carousel-slide.active {
            opacity: 1;
        }

        .slide-content {
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 20px;
            border-radius: 8px;
            max-width: 60%;
        }

        .slide-content h2 {
            margin-bottom: 10px;
            font-size: 1.8rem;
        }

        .carousel-controls {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
        }

        .carousel-control {
            background: rgba(255, 255, 255, 0.8);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-left: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: var(--transition);
        }

        .carousel-control:hover {
            background: white;
        }

        /* Content Sections */
        .section-title {
            margin: 30px 0 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .view-all {
            color: var(--primary);
            text-decoration: none;
            font-size: 0.9rem;
            cursor: pointer;
        }

        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .item-card {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
        }

        .item-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .item-card img {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }

        .card-content {
            padding: 15px;
        }

        .card-content h3 {
            margin-bottom: 5px;
            font-size: 1.1rem;
        }

        .card-content p {
            color: var(--gray);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .genre {
            color: var(--primary) !important;
            font-weight: 600;
        }

        /* Pages */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Book Description Page */
        .desc-cover {
            width: 100%;
            max-width: 300px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }

        .book-info {
            margin-bottom: 30px;
        }

        .book-info h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .book-meta {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            color: var(--gray);
        }

        .book-actions {
            display: flex;
            gap: 15px;
            margin: 25px 0;
        }

        .btn {
            padding: 12px 25px;
            border-radius: 6px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary);
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background-color: rgba(74, 111, 165, 0.1);
        }

        .chapter-btn {
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: white;
            width: 100%;
            text-align: left;
            margin-bottom: 10px;
            cursor: pointer;
            transition: var(--transition);
        }

        .chapter-btn:hover {
            background: #f9f9f9;
            border-color: var(--primary);
        }

        /* Reading Page - PDF Viewer */
        .reading-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .pdf-viewer-container {
            background: white;
            border-radius: 8px;
            box-shadow: var(--shadow);
            padding: 20px;
            margin-bottom: 20px;
        }

        .pdf-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 6px;
        }

        .pdf-nav-buttons {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .page-info {
            font-weight: 600;
            color: var(--primary);
        }

        #pdfCanvas {
            border: 1px solid #ddd;
            max-width: 100%;
            display: block;
            margin: 0 auto;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .pdf-loading {
            text-align: center;
            padding: 40px;
            color: var(--gray);
        }

        .pdf-error {
            text-align: center;
            padding: 40px;
            color: var(--danger);
            background: #ffeaea;
            border-radius: 8px;
        }

        .reading-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        /* Comments Section */
        .comments-section {
            margin-top: 40px;
        }

        .comment-form {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .comment-form textarea {
            width: 100%;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            resize: vertical;
            min-height: 100px;
            margin-bottom: 15px;
            font-family: inherit;
        }

        .comment {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .comment-author {
            font-weight: 600;
        }

        .comment-date {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* Account Page */
        .account-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }

        .account-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-color: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2.5rem;
            font-weight: bold;
        }

        .account-stats {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            text-align: center;
        }

        .stat-card i {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .stat-card h3 {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .history-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            background: white;
            margin-bottom: 10px;
            border-radius: 6px;
        }

        .history-item:last-child {
            border-bottom: none;
        }

        /* Search Results */
        .search-results {
            margin-top: 20px;
        }

        .results-count {
            margin-bottom: 20px;
            color: var(--gray);
        }

        /* Mobile Styles */
        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                position: fixed;
                bottom: 0;
                top: auto;
                height: auto;
                padding: 10px 0;
                z-index: 100;
            }

            .logo {
                display: none;
            }

            .nav-links {
                display: flex;
                justify-content: space-around;
                padding: 0;
            }

            .nav-links li {
                margin-bottom: 0;
            }

            .nav-links a {
                flex-direction: column;
                padding: 8px 5px;
                font-size: 0.8rem;
                text-align: center;
            }

            .nav-links i {
                margin-right: 0;
                margin-bottom: 5px;
                font-size: 1.2rem;
            }

            .nav-links span {
                font-size: 0.7rem;
            }

            .main-content {
                padding-bottom: 80px;
            }

            .header-top {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .search-bar {
                max-width: 100%;
                order: 2;
            }

            .user-actions {
                order: 1;
                width: 100%;
                justify-content: space-between;
            }

            .carousel {
                height: 250px;
            }

            .slide-content {
                max-width: 90%;
            }

            .slide-content h2 {
                font-size: 1.4rem;
            }

            .content-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }

            .book-detail {
                flex-direction: column;
            }

            .pdf-controls {
                flex-direction: column;
                gap: 15px;
            }
        }

        /* Desktop-specific */
        @media (min-width: 769px) {
            .mobile-only {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="logo">
                <h1>Novel<span>Hub</span></h1>
            </div>
            <ul class="nav-links">
                <li><a href="#" class="nav-link active" data-page="homePage"><i class="fas fa-home"></i> <span>Accueil</span></a></li>
                <li><a href="#" class="nav-link" data-page="booksPage"><i class="fas fa-book"></i> <span>Romans</span></a></li>
                <li><a href="#" class="nav-link" data-page="mangaPage"><i class="fas fa-images"></i> <span>Manga</span></a></li>
                <li><a href="#" class="nav-link" data-page="articlesPage"><i class="fas fa-newspaper"></i> <span>Articles</span></a></li>
                <li><a href="#" class="nav-link" id="accountButton"><i class="fas fa-user"></i> <span>Mon Compte</span></a></li>
            </ul>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Header with Search and Carousel -->
            <header class="header">
                <div class="header-top">
                    <div class="search-bar">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchInput" placeholder="Rechercher par titre, auteur ou genre...">
                    </div>
                    <div class="user-actions">
                        <a href="#"><i class="fas fa-bell"></i></a>
                        <a href="#"><i class="fas fa-bookmark"></i></a>
                        <div class="avatar">JS</div>
                    </div>
                </div>
                
                <!-- Carousel -->
                <div class="carousel">
                    <div class="carousel-slide active" style="background-image: url('https://picsum.photos/1200/600?random=1')">
                        <div class="slide-content">
                            <h2>La Cit√© des Ombres</h2>
                            <p>Un roman √©pique dans un monde o√π la magie est interdite.</p>
                        </div>
                    </div>
                    <div class="carousel-slide" style="background-image: url('https://picsum.photos/1200/600?random=2')">
                        <div class="slide-content">
                            <h2>Blade Runner X</h2>
                            <p>Un jeune guerrier cybern√©tique d√©couvrant la v√©rit√© sur son pass√©.</p>
                        </div>
                    </div>
                    <div class="carousel-slide" style="background-image: url('https://picsum.photos/1200/600?random=3')">
                        <div class="slide-content">
                            <h2>Les Secrets du Cerveau Humain</h2>
                            <p>Analyse approfondie du fonctionnement du cerveau.</p>
                        </div>
                    </div>
                    <div class="carousel-controls">
                        <button class="carousel-control prev"><i class="fas fa-chevron-left"></i></button>
                        <button class="carousel-control next"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
            </header>

            <!-- Home Page -->
            <section id="homePage" class="page active">
                <!-- Featured Novels -->
                <div class="section-title">
                    <h2>Romans en Vedette</h2>
                    <a href="#" class="view-all" data-page="booksPage">Voir Tout</a>
                </div>
                <div class="content-grid" id="booksList">
                    <!-- Rempli dynamiquement par JavaScript -->
                </div>

                <!-- Popular Manga -->
                <div class="section-title">
                    <h2>Mangas Populaires</h2>
                    <a href="#" class="view-all" data-page="mangaPage">Voir Tout</a>
                </div>
                <div class="content-grid" id="mangaList">
                    <!-- Rempli dynamiquement par JavaScript -->
                </div>

                <!-- Recent Articles -->
                <div class="section-title">
                    <h2>Articles R√©cents</h2>
                    <a href="#" class="view-all" data-page="articlesPage">Voir Tout</a>
                </div>
                <div class="content-grid" id="articlesList">
                    <!-- Rempli dynamiquement par JavaScript -->
                </div>
            </section>

            <!-- Books Page -->
            <section id="booksPage" class="page">
                <div class="section-title">
                    <h2>Tous les Romans</h2>
                </div>
                <div class="content-grid" id="booksPageList">
                    <!-- Rempli dynamiquement par JavaScript -->
                </div>
            </section>

            <!-- Manga Page -->
            <section id="mangaPage" class="page">
                <div class="section-title">
                    <h2>Tous les Mangas</h2>
                </div>
                <div class="content-grid" id="mangaPageList">
                    <!-- Rempli dynamiquement par JavaScript -->
                </div>
            </section>

            <!-- Articles Page -->
            <section id="articlesPage" class="page">
                <div class="section-title">
                    <h2>Tous les Articles</h2>
                </div>
                <div class="content-grid" id="articlesPageList">
                    <!-- Rempli dynamiquement par JavaScript -->
                </div>
            </section>

            <!-- Description Page -->
            <section id="descriptionPage" class="page">
                <div class="book-detail">
                    <div id="descriptionContent">
                        <!-- Rempli dynamiquement par JavaScript -->
                    </div>
                </div>
            </section>

            <!-- Reader Page -->
            <section id="readerPage" class="page">
                <div class="reading-header">
                    <h2 id="readerTitle">Lecture</h2>
                    <button class="btn btn-outline" onclick="showPage('descriptionPage')">
                        <i class="fas fa-arrow-left"></i> Retour
                    </button>
                </div>
                
                <div class="pdf-viewer-container">
                    <div class="pdf-controls">
                        <div class="pdf-nav-buttons">
                            <button class="btn btn-outline" onclick="prevPage()">
                                <i class="fas fa-chevron-left"></i> Pr√©c√©dent
                            </button>
                            <span class="page-info">
                                Page <span id="pageNum">1</span> sur <span id="pageCount">0</span>
                            </span>
                            <button class="btn btn-outline" onclick="nextPage()">
                                Suivant <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                        <div>
                            <button class="btn btn-outline" onclick="zoomOut()">
                                <i class="fas fa-search-minus"></i>
                            </button>
                            <button class="btn btn-outline" onclick="zoomIn()">
                                <i class="fas fa-search-plus"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div id="pdfViewer">
                        <div class="pdf-loading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Chargement du PDF...</p>
                        </div>
                    </div>
                </div>

                <div class="reading-controls">
                    <button class="btn btn-outline" onclick="showPage('descriptionPage')">
                        <i class="fas fa-arrow-left"></i> Retour au livre
                    </button>
                    <button class="btn btn-primary" onclick="downloadPDF()">
                        <i class="fas fa-download"></i> T√©l√©charger le PDF
                    </button>
                </div>
            </section>

            <!-- Search Page -->
            <section id="searchPage" class="page">
                <div class="section-title">
                    <h2>R√©sultats de Recherche</h2>
                </div>
                <div class="results-count" id="resultsCount"></div>
                <div class="content-grid" id="searchResults">
                    <!-- Rempli dynamiquement par JavaScript -->
                </div>
            </section>

            <!-- Account Page -->
            <section id="accountPage" class="page">
                <div class="account-header">
                    <div class="account-avatar">JS</div>
                    <div>
                        <h1>Jean Smith</h1>
                        <p>Membre depuis Janvier 2024</p>
                    </div>
                </div>

                <div class="account-stats">
                    <div class="stat-card">
                        <i class="fas fa-book-open"></i>
                        <h3 id="totalReads">0</h3>
                        <p>Lectures Total</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-heart"></i>
                        <h3 id="favoritesCount">0</h3>
                        <p>Favoris</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-comment"></i>
                        <h3 id="commentsCount">0</h3>
                        <p>Commentaires</p>
                    </div>
                </div>

                <div class="section-title">
                    <h2>Historique de Lecture</h2>
                </div>
                <div id="historyList">
                    <!-- Rempli dynamiquement par JavaScript -->
                </div>
            </section>
        </main>
    </div>

    <script>
        // Configuration PDF.js
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';

        // Variables pour la gestion PDF
        let currentPdf = null;
        let currentPageNum = 1;
        let currentScale = 1.2;

        // =============================
        // DONN√âES (livres, mangas, articles)
        // =============================
        const data = {
            books: [
                {
                    id: "b1",
                    title: "La Cit√© des Ombres",
                    author: "Amara T.",
                    genre: "Fantaisie",
                    cover: "https://picsum.photos/300/400?random=1",
                    description: "Un roman √©pique dans un monde o√π la magie est interdite. Suivez l'histoire d'Elara, une jeune femme d√©couvrant ses pouvoirs dans une soci√©t√© oppressive.",
                    chapters: [
                        { title: "Chapitre 1: L'√âveil", pdf: "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf", views: 0 },
                        { title: "Chapitre 2: La For√™t Interdite", pdf: "https://www.africau.edu/images/default/sample.pdf", views: 0 },
                        { title: "Chapitre 3: La Rencontre", pdf: "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf", views: 0 }
                    ],
                    comments: [
                        { text: "Captivant d√®s le premier chapitre !", date: "2024-01-15 14:30" },
                        { text: "J'adore l'univers fantasy", date: "2024-01-16 09:15" }
                    ]
                },
                {
                    id: "b2",
                    title: "L'H√©ritage des Anciens",
                    author: "Pierre Dubois",
                    genre: "Aventure",
                    cover: "https://picsum.photos/300/400?random=4",
                    description: "Une qu√™te √©pique √† travers des terres oubli√©es pour retrouver l'h√©ritage des anciens dieux.",
                    chapters: [
                        { title: "Chapitre 1: L'Appel", pdf: "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf", views: 0 },
                        { title: "Chapitre 2: Le Premier Temple", pdf: "https://www.africau.edu/images/default/sample.pdf", views: 0 }
                    ],
                    comments: []
                }
            ],
            mangas: [
                {
                    id: "m1",
                    title: "Blade Runner X",
                    author: "Kenji Sato",
                    genre: "Action",
                    cover: "https://picsum.photos/300/400?random=2",
                    description: "Un jeune guerrier cybern√©tique d√©couvrant la v√©rit√© sur son pass√© dans un Tokyo futuriste.",
                    chapters: [
                        { title: "Chapitre 1: R√©veil Num√©rique", pdf: "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf", views: 0 },
                        { title: "Chapitre 2: M√©moires Fragment√©es", pdf: "https://www.africau.edu/images/default/sample.pdf", views: 0 }
                    ],
                    comments: []
                },
                {
                    id: "m2",
                    title: "Sakura Dreams",
                    author: "Yuki Tanaka",
                    genre: "Romance",
                    cover: "https://picsum.photos/300/400?random=5",
                    description: "Une histoire d'amour touchante entre une artiste et un musicien sous les cerisiers en fleurs.",
                    chapters: [
                        { title: "Chapitre 1: Premi√®re Rencontre", pdf: "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf", views: 0 }
                    ],
                    comments: []
                }
            ],
            articles: [
                {
                    id: "a1",
                    title: "Les Secrets du Cerveau Humain",
                    author: "Dr. Malika Ondo",
                    genre: "Science",
                    cover: "https://picsum.photos/300/400?random=3",
                    description: "Analyse approfondie du fonctionnement du cerveau et des derni√®res d√©couvertes en neurosciences.",
                    pdf: "https://www.africau.edu/images/default/sample.pdf",
                    views: 0,
                    comments: []
                },
                {
                    id: "a2",
                    title: "L'IA et la Cr√©ativit√©",
                    author: "Dr. Thomas Weber",
                    genre: "Technologie",
                    cover: "https://picsum.photos/300/400?random=6",
                    description: "Comment l'intelligence artificielle transforme le paysage cr√©atif et artistique.",
                    pdf: "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf",
                    views: 0,
                    comments: []
                }
            ]
        };

        // =============================
        // FONCTIONNALIT√âS PDF
        // =============================

        async function loadPDF(url) {
            try {
                document.getElementById('pdfViewer').innerHTML = `
                    <div class="pdf-loading">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Chargement du PDF...</p>
                    </div>
                `;

                const loadingTask = pdfjsLib.getDocument(url);
                currentPdf = await loadingTask.promise;
                
                document.getElementById('pageCount').textContent = currentPdf.numPages;
                currentPageNum = 1;
                await renderPage(currentPageNum);
                
            } catch (error) {
                console.error('Erreur de chargement PDF:', error);
                document.getElementById('pdfViewer').innerHTML = `
                    <div class="pdf-error">
                        <i class="fas fa-exclamation-triangle"></i>
                        <p>Erreur de chargement du PDF</p>
                        <button class="btn btn-primary" onclick="downloadPDF()">
                            <i class="fas fa-download"></i> T√©l√©charger √† la place
                        </button>
                    </div>
                `;
            }
        }

        async function renderPage(pageNum) {
            if (!currentPdf) return;

            try {
                const page = await currentPdf.getPage(pageNum);
                const viewport = page.getViewport({ scale: currentScale });
                
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                canvas.height = viewport.height;
                canvas.width = viewport.width;
                
                const renderContext = {
                    canvasContext: context,
                    viewport: viewport
                };
                
                await page.render(renderContext).promise;
                
                document.getElementById('pdfViewer').innerHTML = '';
                document.getElementById('pdfViewer').appendChild(canvas);
                document.getElementById('pageNum').textContent = pageNum;
                
            } catch (error) {
                console.error('Erreur de rendu de page:', error);
            }
        }

        function nextPage() {
            if (currentPdf && currentPageNum < currentPdf.numPages) {
                currentPageNum++;
                renderPage(currentPageNum);
            }
        }

        function prevPage() {
            if (currentPdf && currentPageNum > 1) {
                currentPageNum--;
                renderPage(currentPageNum);
            }
        }

        function zoomIn() {
            currentScale += 0.2;
            renderPage(currentPageNum);
        }

        function zoomOut() {
            if (currentScale > 0.5) {
                currentScale -= 0.2;
                renderPage(currentPageNum);
            }
        }

        function downloadPDF() {
            // R√©cup√©rer l'URL du PDF actuel
            let pdfUrl = currentPdf ? currentPdf.loadingTask.src.url : '';
            if (pdfUrl) {
                const link = document.createElement('a');
                link.href = pdfUrl;
                link.download = 'document.pdf';
                link.click();
            }
        }

        // =============================
        // FONCTION : sauver dans localStorage
        // =============================
        function saveData() {
            localStorage.setItem("readingHistory", JSON.stringify(readingHistory));
        }

        function loadData() {
            const saved = localStorage.getItem("readingHistory");
            return saved ? JSON.parse(saved) : [];
        }

        // =============================
        // HISTORIQUE DE LECTURE
        // =============================
        let readingHistory = loadData();

        function addToHistory(item) {
            readingHistory.unshift({
                title: item.title || item.chapter,
                date: new Date().toLocaleString(),
                type: item.type || 'reading'
            });
            if (readingHistory.length > 50) {
                readingHistory = readingHistory.slice(0, 50);
            }
            saveData();
            updateStats();
        }

        // =============================
        // NAVIGATION ENTRE PAGES
        // =============================
        function showPage(pageId) {
            document.querySelectorAll(".page").forEach(p => p.style.display = "none");
            document.getElementById(pageId).style.display = "block";
            
            document.querySelectorAll(".nav-link").forEach(link => {
                link.classList.remove("active");
            });
            
            if (pageId === "booksPage") {
                renderList("booksPageList", data.books);
            } else if (pageId === "mangaPage") {
                renderList("mangaPageList", data.mangas);
            } else if (pageId === "articlesPage") {
                renderList("articlesPageList", data.articles);
            } else if (pageId === "accountPage") {
                renderHistory();
                updateStats();
            }
        }

        document.querySelectorAll(".nav-link").forEach(btn => {
            btn.addEventListener("click", (e) => {
                e.preventDefault();
                if (btn.id === "accountButton") {
                    showPage("accountPage");
                } else {
                    showPage(btn.dataset.page);
                }
            });
        });

        document.querySelectorAll(".view-all").forEach(link => {
            link.addEventListener("click", (e) => {
                e.preventDefault();
                showPage(link.dataset.page);
            });
        });

        // =============================
        // AFFICHAGE DES LISTES
        // =============================
        function renderList(containerId, items) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            container.innerHTML = "";

            items.forEach(item => {
                container.innerHTML += `
                    <div class="item-card" onclick="openDescription('${item.id}')">
                        <img src="${item.cover}" alt="${item.title}">
                        <div class="card-content">
                            <h3>${item.title}</h3>
                            <p>${item.author}</p>
                            <p class="genre">${item.genre}</p>
                        </div>
                    </div>
                `;
            });
        }

        // Initialisation des listes
        renderList("booksList", data.books);
        renderList("mangaList", data.mangas);
        renderList("articlesList", data.articles);
        renderList("booksPageList", data.books);
        renderList("mangaPageList", data.mangas);
        renderList("articlesPageList", data.articles);

        // =============================
        // PAGE DESCRIPTION
        // =============================
        let currentItem = null;

        function openDescription(id) {
            let item = data.books.find(b => b.id === id) ||
                       data.mangas.find(m => m.id === id) ||
                       data.articles.find(a => a.id === id);

            currentItem = item;

            let html = `
                <img src="${item.cover}" class="desc-cover" alt="${item.title}">
                <div class="book-info">
                    <h1>${item.title}</h1>
                    <div class="book-meta">
                        <span><b>Auteur :</b> ${item.author}</span>
                        <span><b>Genre :</b> ${item.genre}</span>
                    </div>
                    <p>${item.description}</p>
                    <div class="book-actions">
            `;

            if (item.chapters) {
                html += `<h2>Chapitres :</h2>`;
                item.chapters.forEach((ch, i) => {
                    html += `
                        <button class="chapter-btn" onclick="openChapter('${item.id}', ${i})">
                            ${ch.title} ‚Äî ${ch.views} vue(s)
                        </button>
                    `;
                });
            } else {
                html += `
                    <button class="btn btn-primary" onclick="openPDF('${item.id}')">
                        <i class="fas fa-book-open"></i> Lire l'article ‚Äî ${item.views} vue(s)
                    </button>
                `;
            }

            html += `
                    </div>
                </div>
                <div class="comments-section">
                    <h2>Commentaires (${item.comments.length})</h2>
                    <div class="comment-form">
                        <textarea id="commentInput" placeholder="Ajouter un commentaire..."></textarea>
                        <button class="btn btn-primary" onclick="addComment()">
                            <i class="fas fa-paper-plane"></i> Publier
                        </button>
                    </div>
                    <div id="comments">
                    </div>
                </div>
            `;

            document.getElementById("descriptionContent").innerHTML = html;
            showPage("descriptionPage");
            renderComments();
        }

        // =============================
        // PDF LECTURE
        // =============================
        function openChapter(itemId, chapterIndex) {
            openPDF(itemId, chapterIndex);
        }

        function openPDF(itemId, chapterIndex = null) {
            let item = data.books.find(b => b.id === itemId) ||
                       data.mangas.find(m => m.id === itemId) ||
                       data.articles.find(a => a.id === itemId);

            currentItem = item;

            // Augmenter les vues
            if (chapterIndex !== null) {
                item.chapters[chapterIndex].views++;
                addToHistory({ 
                    chapter: `${item.title} - ${item.chapters[chapterIndex].title}`,
                    type: 'chapter'
                });
            } else {
                item.views++;
                addToHistory({ 
                    title: item.title,
                    type: 'article'
                });
            }

            const pdfUrl = chapterIndex !== null ? item.chapters[chapterIndex].pdf : item.pdf;
            const title = chapterIndex !== null ? 
                `${item.title} - ${item.chapters[chapterIndex].title}` : 
                item.title;

            document.getElementById("readerTitle").textContent = title;
            loadPDF(pdfUrl);
            showPage("readerPage");
        }

        // =============================
        // COMMENTAIRES
        // =============================
        function renderComments() {
            const list = document.getElementById("comments");
            if (!list || !currentItem) return;
            
            list.innerHTML = "";

            currentItem.comments.forEach(c => {
                list.innerHTML += `
                    <div class="comment">
                        <div class="comment-header">
                            <span class="comment-author">Lecteur</span>
                            <span class="comment-date">${c.date}</span>
                        </div>
                        <p>${c.text}</p>
                    </div>
                `;
            });
        }

        function addComment() {
            const input = document.getElementById("commentInput");
            if (!input || input.value.trim() === "") return;

            currentItem.comments.unshift({
                text: input.value,
                date: new Date().toLocaleString()
            });

            input.value = "";
            renderComments();
            updateStats();
        }

        // =============================
        // RECHERCHE
        // =============================
        document.getElementById("searchInput").addEventListener("input", function () {
            const text = this.value.toLowerCase();

            const allItems = [
                ...data.books,
                ...data.mangas,
                ...data.articles
            ];

            const results = allItems.filter(
                i =>
                    i.title.toLowerCase().includes(text) ||
                    i.author.toLowerCase().includes(text) ||
                    i.genre.toLowerCase().includes(text)
            );

            renderList("searchResults", results);
            document.getElementById("resultsCount").textContent = 
                `${results.length} r√©sultat(s) trouv√©(s) pour "${this.value}"`;

            if (text.length > 0) {
                showPage("searchPage");
            } else {
                showPage("homePage");
            }
        });

        // =============================
        // COMPTE UTILISATEUR
        // =============================
        function renderHistory() {
            const container = document.getElementById("historyList");
            if (!container) return;
            
            container.innerHTML = "";

            if (readingHistory.length === 0) {
                container.innerHTML = `
                    <div class="history-item">
                        <p>Aucun historique de lecture pour le moment.</p>
                    </div>
                `;
                return;
            }

            readingHistory.forEach(entry => {
                container.innerHTML += `
                    <div class="history-item">
                        <p>üìñ <strong>${entry.title}</strong> ‚Äî <span>${entry.date}</span></p>
                    </div>
                `;
            });
        }

        function updateStats() {
            const totalReads = readingHistory.length;
            document.getElementById("totalReads").textContent = totalReads;

            const allComments = [
                ...data.books.flatMap(b => b.comments),
                ...data.mangas.flatMap(m => m.comments),
                ...data.articles.flatMap(a => a.comments)
            ];
            document.getElementById("commentsCount").textContent = allComments.length;

            document.getElementById("favoritesCount").textContent = Math.floor(totalReads / 2);
        }

        // =============================
        // CAROUSEL FUNCTIONALITY
        // =============================
        let currentSlide = 0;
        const slides = document.querySelectorAll('.carousel-slide');
        const totalSlides = slides.length;

        function showSlide(index) {
            slides.forEach(slide => slide.classList.remove('active'));
            slides[index].classList.add('active');
            currentSlide = index;
        }

        function nextSlide() {
            currentSlide = (currentSlide + 1) % totalSlides;
            showSlide(currentSlide);
        }

        function prevSlide() {
            currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
            showSlide(currentSlide);
        }

        document.querySelector('.carousel-control.next').addEventListener('click', nextSlide);
        document.querySelector('.carousel-control.prev').addEventListener('click', prevSlide);

        setInterval(nextSlide, 5000);

        // =============================
        // INITIALISATION
        // =============================
        document.addEventListener('DOMContentLoaded', function() {
            showPage('homePage');
            updateStats();
        });
    </script>
</body>
</html>
