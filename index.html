<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MUYAMBILI </title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #d4b896;
            --secondary: #e8d5c4;
            --accent: #a78a6f;
            --light: #f8f4f0;
            --dark: #5d4037;
            --gray: #8d6e63;
            --success: #7cb342;
            --warning: #f9a825;
            --danger: #e57373;
            --shadow: 0 4px 6px rgba(93, 64, 55, 0.1);
            --transition: all 0.3s ease;
        }

        [data-theme="dark"] {
            --primary: #8b7355;
            --secondary: #6d5d4c;
            --accent: #a78a6f;
            --light: #2d2d2d;
            --dark: #e8e8e8;
            --gray: #a8a8a8;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        body {
            background: linear-gradient(rgba(248, 244, 240, 0.9), rgba(248, 244, 240, 0.9)), url('assets/images/background.png');
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
            color: var(--dark);
            line-height: 1.6;
            transition: var(--transition);
        }

        [data-theme="dark"] body {
            background: linear-gradient(rgba(45, 45, 45, 0.9), rgba(45, 45, 45, 0.9)), url('assets/images/background.png');
        }

        /* Splash Screen */
        #splashScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--primary);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .splash-content {
            text-align: center;
            color: var(--dark);
        }

        .splash-logo {
            font-size: 4rem;
            font-weight: bold;
            margin-bottom: 20px;
            animation: fadeInUp 1s ease;
        }

        .splash-loader {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(93, 64, 55, 0.3);
            border-top: 3px solid var(--dark);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .toast {
            background: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            border-left: 4px solid var(--success);
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.error {
            border-left-color: var(--danger);
        }

        .toast.warning {
            border-left-color: var(--warning);
        }

        .toast i {
            font-size: 1.2rem;
        }

        /* Layout */
        .app-container {
            display: flex;
            min-height: 100vh;
            opacity: 0;
            animation: fadeIn 0.5s ease 0.5s forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        /* Sidebar */
        .sidebar {
            width: 250px;
            background-color: var(--primary);
            color: var(--dark);
            padding: 20px 0;
            transition: var(--transition);
            box-shadow: var(--shadow);
            z-index: 100;
        }

        .logo {
            text-align: center;
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(93, 64, 55, 0.1);
            margin-bottom: 20px;
        }

        .logo h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .logo span {
            color: var(--accent);
        }

        .nav-links {
            list-style: none;
            padding: 0 15px;
        }

        .nav-links li {
            margin-bottom: 10px;
        }

        .nav-links a {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            color: var(--dark);
            text-decoration: none;
            border-radius: 8px;
            transition: var(--transition);
            cursor: pointer;
        }

        .nav-links a:hover, .nav-links a.active {
            background-color: rgba(212, 184, 150, 0.3);
        }

        .nav-links i {
            margin-right: 12px;
            font-size: 1.2rem;
            width: 24px;
            text-align: center;
        }

        .theme-toggle {
            margin: 20px 15px 0;
            padding: 10px 15px;
            background: rgba(212, 184, 150, 0.3);
            border: none;
            border-radius: 8px;
            color: var(--dark);
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: var(--transition);
            width: calc(100% - 30px);
        }

        .theme-toggle:hover {
            background: rgba(212, 184, 150, 0.5);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
        }

        /* Header with Search */
        .header {
            margin-bottom: 30px;
        }

        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--secondary);
        }

        .search-bar {
            flex: 1;
            max-width: 500px;
            position: relative;
        }

        .search-bar input {
            width: 100%;
            padding: 12px 20px;
            border-radius: 30px;
            border: 1px solid var(--secondary);
            font-size: 1rem;
            padding-left: 45px;
            transition: var(--transition);
            background: white;
        }

        .search-bar input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(212, 184, 150, 0.2);
        }

        .search-bar i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
        }

        .user-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-actions button {
            background: none;
            border: none;
            color: var(--dark);
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: var(--transition);
        }

        .user-actions button:hover {
            background: var(--secondary);
        }

        .user-actions .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }

        /* Hero Carousel */
        .hero-carousel {
            position: relative;
            height: 500px;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--shadow);
            margin-bottom: 40px;
        }

        .hero-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            padding: 0 60px;
        }

        .hero-slide.active {
            opacity: 1;
        }

        .hero-content {
            max-width: 50%;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .hero-content h2 {
            font-size: 3rem;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .hero-content p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .hero-btn {
            background: var(--accent);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 10px;
            text-shadow: none;
        }

        .hero-btn:hover {
            background: #8c7259;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .carousel-indicators {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 10px;
        }

        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: var(--transition);
        }

        .indicator.active {
            background: white;
            transform: scale(1.2);
        }

        .carousel-control {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.9);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: var(--transition);
            color: var(--dark);
        }

        .carousel-control:hover {
            background: white;
            transform: translateY(-50%) scale(1.1);
        }

        .carousel-control.prev {
            left: 20px;
        }

        .carousel-control.next {
            right: 20px;
        }

        /* Content Sections */
        .section-title {
            margin: 40px 0 25px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .section-title h2 {
            font-size: 2rem;
            color: var(--dark);
        }

        .view-all {
            color: var(--accent);
            text-decoration: none;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .view-all:hover {
            color: var(--dark);
        }

        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
        }

        .item-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
            border: 1px solid var(--secondary);
            position: relative;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .item-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 25px rgba(93, 64, 55, 0.15);
        }

        .item-card img {
            width: 100%;
            height: 280px;
            object-fit: cover;
            transition: var(--transition);
        }

        .item-card:hover img {
            transform: scale(1.05);
        }

        .favorite-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            color: var(--gray);
        }

        .favorite-btn:hover {
            background: white;
            transform: scale(1.1);
        }

        .favorite-btn.active {
            color: #e74c3c;
        }

        .card-content {
            padding: 20px;
        }

        .card-content h3 {
            margin-bottom: 8px;
            font-size: 1.2rem;
            color: var(--dark);
        }

        .card-content p {
            color: var(--gray);
            font-size: 0.95rem;
            margin-bottom: 12px;
        }

        .genre {
            color: var(--accent) !important;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .views-badge {
            background: var(--light);
            color: var(--accent);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .rating {
            display: flex;
            gap: 2px;
            margin-top: 8px;
        }

        .rating i {
            color: var(--gray);
            cursor: pointer;
            transition: var(--transition);
        }

        .rating i.active {
            color: #f39c12;
        }

        .rating i:hover {
            transform: scale(1.2);
        }

        /* Pages */
        .page {
            display: none;
            animation: fadeIn 0.3s ease;
        }

        .page.active {
            display: block;
        }

        /* Book Description Page */
        .book-detail {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 40px;
            margin-bottom: 40px;
        }

        .book-cover-container {
            position: relative;
        }

        .desc-cover {
            width: 100%;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(93, 64, 55, 0.2);
        }

        .book-info {
            padding: 20px 0;
        }

        .book-info h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--dark);
            line-height: 1.2;
        }

        .book-meta {
            display: flex;
            gap: 25px;
            margin-bottom: 25px;
            color: var(--gray);
            font-size: 1.1rem;
        }

        .book-description {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 30px;
            color: var(--dark);
        }

        .book-actions {
            display: flex;
            gap: 15px;
            margin: 30px 0;
        }

        .btn {
            padding: 14px 28px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 10px;
            font-size: 1rem;
        }

        .btn-primary {
            background-color: var(--primary);
            color: var(--dark);
        }

        .btn-primary:hover {
            background-color: var(--accent);
            color: white;
            transform: translateY(-2px);
        }

        .btn-outline {
            background-color: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background-color: var(--primary);
            color: var(--dark);
            transform: translateY(-2px);
        }

        .chapters-section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-top: 30px;
        }

        .chapters-section h2 {
            margin-bottom: 20px;
            color: var(--dark);
            font-size: 1.5rem;
        }

        .chapter-btn {
            padding: 18px 20px;
            border: 2px solid var(--secondary);
            border-radius: 8px;
            background: white;
            width: 100%;
            text-align: left;
            margin-bottom: 12px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chapter-btn:hover {
            background: var(--light);
            border-color: var(--primary);
            transform: translateX(5px);
        }

        .chapter-views {
            color: var(--gray);
            font-size: 0.9rem;
            background: var(--light);
            padding: 4px 12px;
            border-radius: 20px;
        }

        /* Reading Page - PDF Viewer */
        .reading-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--secondary);
        }

        .reading-header h2 {
            color: var(--dark);
            font-size: 1.8rem;
        }

        .pdf-viewer-container {
            background: white;
            border-radius: 12px;
            box-shadow: var(--shadow);
            padding: 25px;
            margin-bottom: 25px;
        }

        .pdf-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding: 20px;
            background: var(--light);
            border-radius: 8px;
        }

        .pdf-nav-buttons {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .page-info {
            font-weight: 600;
            color: var(--accent);
            font-size: 1.1rem;
        }

        #pdfCanvas {
            border: 1px solid var(--secondary);
            max-width: 100%;
            display: block;
            margin: 0 auto;
            box-shadow: 0 4px 15px rgba(93, 64, 55, 0.1);
            border-radius: 8px;
        }

        .pdf-loading {
            text-align: center;
            padding: 60px;
            color: var(--gray);
        }

        .pdf-error {
            text-align: center;
            padding: 60px;
            color: var(--danger);
            background: #fdeded;
            border-radius: 12px;
            border: 1px solid var(--danger);
        }

        .reading-controls {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        /* Favorites & History Pages */
        .library-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--secondary);
        }

        .library-tab {
            padding: 12px 24px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            color: var(--gray);
            cursor: pointer;
            transition: var(--transition);
            font-weight: 600;
        }

        .library-tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .library-tab:hover {
            color: var(--dark);
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--gray);
        }

        .empty-state i {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-state h3 {
            margin-bottom: 10px;
            color: var(--dark);
        }

        .empty-state p {
            margin-bottom: 20px;
        }

        /* Contact Page */
        .contact-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 40px;
        }

        .contact-info {
            background: white;
            padding: 35px;
            border-radius: 12px;
            box-shadow: var(--shadow);
        }

        .contact-info h3 {
            margin-bottom: 25px;
            color: var(--dark);
            font-size: 1.5rem;
        }

        .info-item {
            display: flex;
            align-items: flex-start;
            gap: 18px;
            margin-bottom: 25px;
        }

        .info-item i {
            color: var(--primary);
            font-size: 1.3rem;
            margin-top: 3px;
        }

        .info-content h4 {
            margin-bottom: 8px;
            color: var(--dark);
        }

        .info-content p {
            color: var(--gray);
            line-height: 1.6;
        }

        .contact-form {
            background: white;
            padding: 35px;
            border-radius: 12px;
            box-shadow: var(--shadow);
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--dark);
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 14px;
            border: 2px solid var(--secondary);
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
            background: white;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(212, 184, 150, 0.2);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 140px;
        }

        .about-section {
            background: white;
            padding: 35px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            margin-top: 40px;
        }

        .about-section h3 {
            margin-bottom: 25px;
            color: var(--dark);
            font-size: 1.5rem;
        }

        .about-section p {
            margin-bottom: 20px;
            line-height: 1.8;
            color: var(--dark);
        }

        /* Comments Section */
        .comments-section {
            margin-top: 40px;
        }

        .comment-form {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .comment-form textarea {
            width: 100%;
            padding: 16px;
            border: 2px solid var(--secondary);
            border-radius: 8px;
            resize: vertical;
            min-height: 120px;
            margin-bottom: 20px;
            font-family: inherit;
            transition: var(--transition);
        }

        .comment-form textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(212, 184, 150, 0.2);
        }

        .comment {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            border-left: 4px solid var(--primary);
        }

        .comment-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .comment-author {
            font-weight: 600;
            color: var(--dark);
        }

        .comment-date {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* Account Page */
        .account-header {
            display: flex;
            align-items: center;
            gap: 25px;
            margin-bottom: 40px;
            padding-bottom: 25px;
            border-bottom: 2px solid var(--secondary);
        }

        .account-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
            font-weight: bold;
            box-shadow: var(--shadow);
        }

        .account-stats {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
        }

        .stat-card {
            background: white;
            padding: 30px 25px;
            border-radius: 12px;
            box-shadow: var(--shadow);
            text-align: center;
            transition: var(--transition);
            border: 1px solid var(--secondary);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(93, 64, 55, 0.15);
        }

        .stat-card i {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .stat-card h3 {
            font-size: 2.2rem;
            margin-bottom: 8px;
            color: var(--dark);
        }

        .stat-card p {
            color: var(--gray);
            font-weight: 600;
        }

        .history-item {
            padding: 20px;
            border-bottom: 1px solid var(--secondary);
            background: white;
            margin-bottom: 12px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .history-item:hover {
            transform: translateX(5px);
            border-left: 4px solid var(--primary);
        }

        .history-item:last-child {
            border-bottom: none;
        }

        /* Search Results */
        .search-results {
            margin-top: 25px;
        }

        .results-count {
            margin-bottom: 25px;
            color: var(--gray);
            font-size: 1.1rem;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: var(--shadow);
        }

        /* Mobile Styles */
        @media (max-width: 768px) {
            .app-container {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                position: fixed;
                bottom: 0;
                top: auto;
                height: auto;
                padding: 10px 0;
                z-index: 100;
            }

            .logo {
                display: none;
            }

            .nav-links {
                display: flex;
                justify-content: space-around;
                padding: 0;
            }

            .nav-links li {
                margin-bottom: 0;
            }

            .nav-links a {
                flex-direction: column;
                padding: 8px 5px;
                font-size: 0.8rem;
                text-align: center;
            }

            .nav-links i {
                margin-right: 0;
                margin-bottom: 5px;
                font-size: 1.2rem;
            }

            .nav-links span {
                font-size: 0.7rem;
            }

            .theme-toggle {
                display: none;
            }

            .main-content {
                padding-bottom: 80px;
            }

            /* Cacher les éléments au-dessus de la barre de recherche en mobile */
            .header-top {
                flex-direction: column;
                align-items: stretch;
                gap: 15px;
            }

            .user-actions {
                display: none;
            }

            .search-bar {
                max-width: 100%;
                order: 2;
            }

            .hero-carousel {
                height: 400px;
            }

            .hero-slide {
                padding: 0 20px;
            }

            .hero-content {
                max-width: 100%;
                text-align: center;
            }

            .hero-content h2 {
                font-size: 2rem;
            }

            .hero-content p {
                font-size: 1rem;
            }

            .carousel-control {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }

            .content-grid {
                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
                gap: 15px;
            }

            .book-detail {
                grid-template-columns: 1fr;
                gap: 25px;
            }

            .pdf-controls {
                flex-direction: column;
                gap: 15px;
            }

            .contact-container {
                grid-template-columns: 1fr;
            }

            .account-header {
                flex-direction: column;
                text-align: center;
            }

            .account-stats {
                grid-template-columns: 1fr;
            }

            .library-tabs {
                flex-direction: column;
            }
        }

        /* Desktop-specific */
        @media (min-width: 769px) {
            .mobile-only {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- Splash Screen -->
    <div id="splashScreen">
        <div class="splash-content">
            <div class="splash-logo">MUYAMBILI</div>
            <div class="splash-loader"></div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="logo">
                <h1>MUY<span>AMBILI</span></h1>
            </div>
            <ul class="nav-links">
                <li><a href="#" class="nav-link active" data-page="homePage"><i class="fas fa-home"></i> <span>Accueil</span></a></li>
                <li><a href="#" class="nav-link" data-page="booksPage"><i class="fas fa-book"></i> <span>Romans</span></a></li>
                <li><a href="#" class="nav-link" data-page="mangaPage"><i class="fas fa-images"></i> <span>Manga</span></a></li>
                <li><a href="#" class="nav-link" data-page="articlesPage"><i class="fas fa-newspaper"></i> <span>Blog</span></a></li>
                <li><a href="#" class="nav-link" data-page="libraryPage"><i class="fas fa-heart"></i> <span>Favoris</span></a></li>
                <li><a href="#" class="nav-link" data-page="contactPage"><i class="fas fa-envelope"></i> <span>Contact</span></a></li>
                <li><a href="#" class="nav-link" id="accountButton"><i class="fas fa-user"></i> <span>Compte</span></a></li>
            </ul>
            <button class="theme-toggle" id="themeToggle">
                <i class="fas fa-moon"></i>
                <span>Mode sombre</span>
            </button>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Header with Search -->
            <header class="header">
                <div class="header-top">
                    <div class="search-bar">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchInput" placeholder="Rechercher par titre, auteur ou genre...">
                    </div>
                    <div class="user-actions">
                        <button id="favoritesBtn" title="Mes favoris">
                            <i class="fas fa-heart"></i>
                        </button>
                        <button id="themeToggleMobile" title="Changer le thème">
                            <i class="fas fa-palette"></i>
                        </button>
                        <div class="avatar">V</div>
                    </div>
                </div>
                
                <!-- Hero Carousel -->
                <div class="hero-carousel">
                    <div class="hero-slide active" style="background-image: url('https://picsum.photos/1200/600?random=1')">
                        <div class="hero-content">
                            <h2>La Cité des Ombres</h2>
                            <p>Plongez dans un monde épique où la magie est interdite et les secrets anciens refont surface.</p>
                            <button class="hero-btn" onclick="openDescription('b1')">
                                <i class="fas fa-book-open"></i> Commencer la lecture
                            </button>
                        </div>
                    </div>
                    <div class="hero-slide" style="background-image: url('https://picsum.photos/1200/600?random=2')">
                        <div class="hero-content">
                            <h2>Blade Runner X</h2>
                            <p>Un cyberpunk haletant dans un Tokyo futuriste où humains et androides se confrontent.</p>
                            <button class="hero-btn" onclick="openDescription('m1')">
                                <i class="fas fa-play"></i> Découvrir l'univers
                            </button>
                        </div>
                    </div>
                    <div class="hero-slide" style="background-image: url('https://picsum.photos/1200/600?random=3')">
                        <div class="hero-content">
                            <h2>Les Secrets du Cerveau</h2>
                            <p>Explorez les mystères de l'esprit humain avec les dernières découvertes en neurosciences.</p>
                            <button class="hero-btn" onclick="openDescription('a1')">
                                <i class="fas fa-brain"></i> Lire l'article
                            </button>
                        </div>
                    </div>
                    
                    <button class="carousel-control prev"><i class="fas fa-chevron-left"></i></button>
                    <button class="carousel-control next"><i class="fas fa-chevron-right"></i></button>
                    
                    <div class="carousel-indicators">
                        <div class="indicator active" data-slide="0"></div>
                        <div class="indicator" data-slide="1"></div>
                        <div class="indicator" data-slide="2"></div>
                    </div>
                </div>
            </header>

            <!-- Home Page -->
            <section id="homePage" class="page active">
                <!-- Featured Novels -->
                <div class="section-title">
                    <h2>Romans en Vedette</h2>
                    <a href="#" class="view-all" data-page="booksPage">Voir Tout</a>
                </div>
                <div class="content-grid" id="booksList">
                    <!-- Rempli dynamiquement par JavaScript -->
                </div>

                <!-- Popular Manga -->
                <div class="section-title">
                    <h2>Mangas Populaires</h2>
                    <a href="#" class="view-all" data-page="mangaPage">Voir Tout</a>
                </div>
                <div class="content-grid" id="mangaList">
                    <!-- Rempli dynamiquement par JavaScript -->
                </div>

                <!-- Recent Articles -->
                <div class="section-title">
                    <h2>Articles Récents</h2>
                    <a href="#" class="view-all" data-page="articlesPage">Voir Tout</a>
                </div>
                <div class="content-grid" id="articlesList">
                    <!-- Rempli dynamiquement par JavaScript -->
                </div>
            </section>

            <!-- Books Page -->
            <section id="booksPage" class="page">
                <div class="section-title">
                    <h2>Tous les Romans</h2>
                </div>
                <div class="content-grid" id="booksPageList">
                    <!-- Rempli dynamiquement par JavaScript -->
                </div>
            </section>

            <!-- Manga Page -->
            <section id="mangaPage" class="page">
                <div class="section-title">
                    <h2>Tous les Mangas</h2>
                </div>
                <div class="content-grid" id="mangaPageList">
                    <!-- Rempli dynamiquement par JavaScript -->
                </div>
            </section>

            <!-- Articles Page -->
            <section id="articlesPage" class="page">
                <div class="section-title">
                    <h2>Tous les Articles</h2>
                </div>
                <div class="content-grid" id="articlesPageList">
                    <!-- Rempli dynamiquement par JavaScript -->
                </div>
            </section>

            <!-- Library Page -->
            <section id="libraryPage" class="page">
                <div class="section-title">
                    <h2>Ma Bibliothèque</h2>
                </div>

                <div class="library-tabs">
                    <button class="library-tab active" data-tab="favorites">
                        <i class="fas fa-heart"></i> Mes Favoris
                    </button>
                    <button class="library-tab" data-tab="history">
                        <i class="fas fa-history"></i> Historique de Lecture
                    </button>
                </div>

                <div id="favoritesTab" class="tab-content active">
                    <div class="content-grid" id="favoritesList">
                        <!-- Rempli dynamiquement par JavaScript -->
                    </div>
                </div>

                <div id="historyTab" class="tab-content">
                    <div id="historyContent">
                        <!-- Rempli dynamiquement par JavaScript -->
                    </div>
                </div>
            </section>

            <!-- Description Page -->
            <section id="descriptionPage" class="page">
                <div class="book-detail">
                    <div class="book-cover-container">
                        <img id="descCover" class="desc-cover" src="" alt="">
                    </div>
                    <div id="descriptionContent">
                        <!-- Rempli dynamiquement par JavaScript -->
                    </div>
                </div>
            </section>

            <!-- Reader Page -->
            <section id="readerPage" class="page">
                <div class="reading-header">
                    <h2 id="readerTitle">Lecture</h2>
                    <button class="btn btn-outline" onclick="showPage('descriptionPage')">
                        <i class="fas fa-arrow-left"></i> Retour
                    </button>
                </div>
                
                <div class="pdf-viewer-container">
                    <div class="pdf-controls">
                        <div class="pdf-nav-buttons">
                            <button class="btn btn-outline" onclick="prevPage()">
                                <i class="fas fa-chevron-left"></i> Précédent
                            </button>
                            <span class="page-info">
                                Page <span id="pageNum">1</span> sur <span id="pageCount">0</span>
                            </span>
                            <button class="btn btn-outline" onclick="nextPage()">
                                Suivant <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                        <div>
                            <button class="btn btn-outline" onclick="zoomOut()">
                                <i class="fas fa-search-minus"></i>
                            </button>
                            <button class="btn btn-outline" onclick="zoomIn()">
                                <i class="fas fa-search-plus"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div id="pdfViewer">
                        <div class="pdf-loading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Chargement du PDF...</p>
                        </div>
                    </div>
                </div>

                <div class="reading-controls">
                    <button class="btn btn-outline" onclick="showPage('descriptionPage')">
                        <i class="fas fa-arrow-left"></i> Retour au livre
                    </button>
                </div>
            </section>

            <!-- Contact Page -->
            <section id="contactPage" class="page">
                <div class="section-title">
                    <h2>Contactez-nous</h2>
                </div>

                <div class="contact-container">
                    <div class="contact-info">
                        <h3>Informations de contact</h3>
                        <div class="info-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <div class="info-content">
                                <h4>Adresse</h4>
                                <p>Amissa<br>Akanda, Gabon</p>
                            </div>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-phone"></i>
                            <div class="info-content">
                                <h4>Téléphone</h4>
                                <p>+241 74 67 58 14</p>
                            </div>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-envelope"></i>
                            <div class="info-content">
                                <h4>Email</h4>
                                <p>contact@muyambili.com</p>
                            </div>
                        </div>
                        <div class="info-item">
                            <i class="fas fa-clock"></i>
                            <div class="info-content">
                                <h4>Horaires service client</h4>
                                <p>Lundi - Vendredi: 9h00 - 18h00<br>
                                   Samedi: 10h00 - 17h00<br>
                                   Dimanche: Fermé</p>
                            </div>
                        </div>
                    </div>

                    <div class="contact-form">
                        <h3>Envoyez-nous un message</h3>
                        <form action="mailto:contact@muyambili.com" method="post" enctype="text/plain">
                            <div class="form-group">
                                <label for="name">Nom complet</label>
                                <input type="text" id="name" name="name" required>
                            </div>
                            <div class="form-group">
                                <label for="email">Adresse email</label>
                                <input type="email" id="email" name="email" required>
                            </div>
                            <div class="form-group">
                                <label for="subject">Sujet</label>
                                <select id="subject" name="subject" required>
                                    <option value="">Sélectionnez un sujet</option>
                                    <option value="support">Support technique</option>
                                    <option value="partnership">Partenariat</option>
                                    <option value="suggestion">Suggestion</option>
                                    <option value="bug">Signaler un bug</option>
                                    <option value="other">Autre</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="message">Message</label>
                                <textarea id="message" name="message" required></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-paper-plane"></i> Envoyer le message
                            </button>
                        </form>
                    </div>
                </div>

                <div class="about-section">
                    <h3>À propos de MUYAMBILI</h3>
                    <p>MUYAMBILI signifie "conteur" en langue Nzebi. Nous portons ce nom avec fierté, car il incarne notre mission : perpétuer la tradition orale africaine et la littérature à l'ère numérique.</p>
                    <h3>Notre mission</h3>
                    <p>Révolutionner l'accès à la littérature gabonaise en créant la première plateforme numérique dédiée aux auteurs locaux. Nous connectons directement les conteurs modernes à leur public, sans intermédiaires.</p>
                </div>
            </section>

            <!-- Search Page -->
            <section id="searchPage" class="page">
                <div class="section-title">
                    <h2>Résultats de Recherche</h2>
                </div>
                <div class="results-count" id="resultsCount"></div>
                <div class="content-grid" id="searchResults">
                    <!-- Rempli dynamiquement par JavaScript -->
                </div>
            </section>

            <!-- Account Page -->
            <section id="accountPage" class="page">
                <div class="account-header">
                    <div class="account-avatar">V</div>
                    <div>
                        <h1>Visiteur</h1>
                        <p>Connecté en tant qu'invité</p>
                    </div>
                </div>

                <div class="account-stats">
                    <div class="stat-card">
                        <i class="fas fa-book-open"></i>
                        <h3 id="totalReads">0</h3>
                        <p>Lectures Total</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-heart"></i>
                        <h3 id="favoritesCount">0</h3>
                        <p>Favoris</p>
                    </div>
                    <div class="stat-card">
                        <i class="fas fa-comment"></i>
                        <h3 id="commentsCount">0</h3>
                        <p>Commentaires</p>
                    </div>
                </div>

                <div class="section-title">
                    <h2>Votre Historique de Lecture</h2>
                </div>
                <div id="historyList">
                    <!-- Rempli dynamiquement par JavaScript -->
                </div>
            </section>
        </main>
    </div>

    <script>
        // Configuration PDF.js
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';

        // Variables pour la gestion PDF
        let currentPdf = null;
        let currentPageNum = 1;
        let currentScale = 1.2;

        // =============================
        // SYSTÈME DE VUES GLOBALES
        // =============================
        let globalViews = {};
        let userHistory = [];
        let userFavorites = [];
        let userRatings = {};

        // Charger les données depuis le localStorage
        function loadUserData() {
            const savedViews = localStorage.getItem('muyambili_global_views');
            const savedHistory = localStorage.getItem('muyambili_user_history');
            const savedFavorites = localStorage.getItem('muyambili_favorites');
            const savedRatings = localStorage.getItem('muyambili_ratings');
            const savedTheme = localStorage.getItem('muyambili_theme');

            globalViews = savedViews ? JSON.parse(savedViews) : {};
            userHistory = savedHistory ? JSON.parse(savedHistory) : [];
            userFavorites = savedFavorites ? JSON.parse(savedFavorites) : [];
            userRatings = savedRatings ? JSON.parse(savedRatings) : {};

            // Appliquer le thème sauvegardé
            if (savedTheme) {
                document.documentElement.setAttribute('data-theme', savedTheme);
                updateThemeToggleIcon();
            }
        }

        // Sauvegarder les données
        function saveUserData() {
            localStorage.setItem('muyambili_global_views', JSON.stringify(globalViews));
            localStorage.setItem('muyambili_user_history', JSON.stringify(userHistory));
            localStorage.setItem('muyambili_favorites', JSON.stringify(userFavorites));
            localStorage.setItem('muyambili_ratings', JSON.stringify(userRatings));
        }

        // Incrémenter les vues pour un contenu
        function incrementViews(itemId, chapterIndex = null) {
            const key = chapterIndex !== null ? `${itemId}_chapter_${chapterIndex}` : itemId;
            
            globalViews[key] = (globalViews[key] || 0) + 1;
            
            // Ajouter à l'historique utilisateur
            const item = getItemById(itemId);
            if (item) {
                const title = chapterIndex !== null ? 
                    `${item.title} - ${item.chapters[chapterIndex].title}` : 
                    item.title;
                
                const recentDuplicate = userHistory.find(entry => 
                    entry.title === title && 
                    (Date.now() - entry.timestamp) < 300000
                );

                if (!recentDuplicate) {
                    userHistory.unshift({
                        title: title,
                        date: new Date().toLocaleString('fr-FR'),
                        timestamp: Date.now(),
                        itemId: itemId,
                        chapterIndex: chapterIndex
                    });
                    
                    if (userHistory.length > 20) {
                        userHistory = userHistory.slice(0, 20);
                    }
                    
                    updateStats();
                }
            }
            
            saveUserData();
        }

        // Obtenir le nombre de vues
        function getViews(itemId, chapterIndex = null) {
            const key = chapterIndex !== null ? `${itemId}_chapter_${chapterIndex}` : itemId;
            return globalViews[key] || 0;
        }

        // Gestion des favoris
        function toggleFavorite(itemId) {
            const index = userFavorites.indexOf(itemId);
            
            if (index > -1) {
                userFavorites.splice(index, 1);
                showToast('Retiré des favoris', 'success');
            } else {
                userFavorites.push(itemId);
                showToast('Ajouté aux favoris', 'success');
            }
            
            saveUserData();
            updateStats();
            
            // Mettre à jour l'affichage si on est sur la page des favoris
            if (document.getElementById('libraryPage').style.display === 'block') {
                renderFavorites();
            }
            
            return index === -1; // Retourne true si ajouté, false si retiré
        }

        function isFavorite(itemId) {
            return userFavorites.includes(itemId);
        }

        // Gestion des notations
        function rateItem(itemId, rating) {
            userRatings[itemId] = rating;
            saveUserData();
            showToast(`Noté ${rating} étoile(s)`, 'success');
        }

        function getRating(itemId) {
            return userRatings[itemId] || 0;
        }

        // Obtenir un item par son ID
        function getItemById(itemId) {
            return data.books.find(b => b.id === itemId) ||
                   data.mangas.find(m => m.id === itemId) ||
                   data.articles.find(a => a.id === itemId);
        }

        // =============================
        // SYSTÈME DE TOAST
        // =============================
        function showToast(message, type = 'success') {
            const toastContainer = document.getElementById('toastContainer');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            const icons = {
                success: 'fas fa-check-circle',
                error: 'fas fa-exclamation-circle',
                warning: 'fas fa-exclamation-triangle'
            };

            toast.innerHTML = `
                <i class="${icons[type] || icons.success}"></i>
                <span>${message}</span>
            `;

            toastContainer.appendChild(toast);

            // Animation d'entrée
            setTimeout(() => toast.classList.add('show'), 100);

            // Suppression automatique
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => {
                    if (toast.parentNode) {
                        toast.parentNode.removeChild(toast);
                    }
                }, 300);
            }, 3000);
        }

        // =============================
        // GESTION DU THÈME
        // =============================
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('muyambili_theme', newTheme);
            updateThemeToggleIcon();
            
            showToast(`Mode ${newTheme === 'dark' ? 'sombre' : 'clair'} activé`);
        }

        function updateThemeToggleIcon() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const icons = document.querySelectorAll('#themeToggle i, #themeToggleMobile i');
            const labels = document.querySelectorAll('#themeToggle span');
            
            icons.forEach(icon => {
                icon.className = currentTheme === 'dark' ? 'fas fa-sun' : 'fas fa-moon';
            });
            
            labels.forEach(label => {
                label.textContent = currentTheme === 'dark' ? 'Mode clair' : 'Mode sombre';
            });
        }

        // =============================
        // GESTION DE LA BIBLIOTHÈQUE
        // =============================
        function renderFavorites() {
            const container = document.getElementById('favoritesList');
            if (!container) return;
            
            container.innerHTML = '';

            if (userFavorites.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-heart"></i>
                        <h3>Aucun favori</h3>
                        <p>Vous n'avez encore aucun contenu dans vos favoris.</p>
                        <button class="btn btn-primary" onclick="showPage('homePage')">
                            <i class="fas fa-book-open"></i> Découvrir des contenus
                        </button>
                    </div>
                `;
                return;
            }

            const favoriteItems = userFavorites.map(itemId => getItemById(itemId)).filter(Boolean);
            
            favoriteItems.forEach(item => {
                const totalViews = getViews(item.id);
                const isFav = isFavorite(item.id);
                const rating = getRating(item.id);
                
                container.innerHTML += `
                    <div class="item-card" onclick="openDescription('${item.id}')">
                        <img src="${item.cover}" alt="${item.title}">
                        <button class="favorite-btn active" onclick="event.stopPropagation(); toggleFavorite('${item.id}'); this.classList.toggle('active')">
                            <i class="fas fa-heart"></i>
                        </button>
                        <div class="card-content">
                            <h3>${item.title}</h3>
                            <p>${item.author}</p>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                <p class="genre">${item.genre}</p>
                                <span class="views-badge">${totalViews} vues</span>
                            </div>
                            <div class="rating" onclick="event.stopPropagation()">
                                ${[1,2,3,4,5].map(star => `
                                    <i class="fas fa-star ${star <= rating ? 'active' : ''}" 
                                       onclick="rateItem('${item.id}', ${star})"></i>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        function renderLibraryHistory() {
            const container = document.getElementById('historyContent');
            if (!container) return;
            
            container.innerHTML = '';

            if (userHistory.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-history"></i>
                        <h3>Aucun historique</h3>
                        <p>Vous n'avez encore rien lu récemment.</p>
                        <button class="btn btn-primary" onclick="showPage('homePage')">
                            <i class="fas fa-book-open"></i> Commencer à lire
                        </button>
                    </div>
                `;
                return;
            }

            userHistory.forEach(entry => {
                const item = getItemById(entry.itemId);
                if (item) {
                    container.innerHTML += `
                        <div class="history-item" onclick="openDescription('${entry.itemId}')">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <h4>${entry.title}</h4>
                                    <p style="color: var(--gray); margin-top: 5px;">
                                        <i class="fas fa-clock"></i> Lu le ${entry.date}
                                    </p>
                                </div>
                                <i class="fas fa-chevron-right" style="color: var(--gray);"></i>
                            </div>
                        </div>
                    `;
                }
            });
        }

        function switchLibraryTab(tabName) {
            // Mettre à jour les tabs
            document.querySelectorAll('.library-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelector(`.library-tab[data-tab="${tabName}"]`).classList.add('active');

            // Mettre à jour le contenu
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${tabName}Tab`).classList.add('active');

            // Recharger le contenu
            if (tabName === 'favorites') {
                renderFavorites();
            } else if (tabName === 'history') {
                renderLibraryHistory();
            }
        }

        // =============================
        // DONNÉES (livres, mangas, articles)
        // =============================
        const data = {
            books: [
                {
                    id: "b1",
                    title: "La Cité des Ombres",
                    author: "Amara T.",
                    genre: "Fantaisie",
                    cover: "https://picsum.photos/300/400?random=1",
                    description: "Un roman épique dans un monde où la magie est interdite. Suivez l'histoire d'Elara, une jeune femme découvrant ses pouvoirs dans une société oppressive. Entre complots politiques et quêtes personnelles, ce récit vous transportera dans un univers riche et complexe.",
                    chapters: [
                        { title: "Chapitre 1: L'Éveil", pdf: "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf" },
                        { title: "Chapitre 2: La Forêt Interdite", pdf: "https://www.africau.edu/images/default/sample.pdf" },
                        { title: "Chapitre 3: La Rencontre", pdf: "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf" }
                    ],
                    comments: [
                        { text: "Captivant dès le premier chapitre ! L'univers est incroyablement bien construit.", date: "2024-01-15 14:30" },
                        { text: "J'adore l'univers fantasy et les personnages sont très attachants.", date: "2024-01-16 09:15" }
                    ]
                },
                {
                    id: "b2",
                    title: "L'Héritage des Anciens",
                    author: "Pierre Dubois",
                    genre: "Aventure",
                    cover: "https://picsum.photos/300/400?random=4",
                    description: "Une quête épique à travers des terres oubliées pour retrouver l'héritage des anciens dieux. Accompagnez Kael dans sa périlleuse aventure remplie de mystères et de découvertes.",
                    chapters: [
                        { title: "Chapitre 1: L'Appel", pdf: "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf" },
                        { title: "Chapitre 2: Le Premier Temple", pdf: "https://www.africau.edu/images/default/sample.pdf" }
                    ],
                    comments: []
                }
            ],
            mangas: [
                {
                    id: "m1",
                    title: "Blade Runner X",
                    author: "Kenji Sato",
                    genre: "Action",
                    cover: "https://picsum.photos/300/400?random=2",
                    description: "Un jeune guerrier cybernétique découvrant la vérité sur son passé dans un Tokyo futuriste. Entre combats spectaculaires et révélations choquantes, cette série vous tiendra en haleine.",
                    chapters: [
                        { title: "Chapitre 1: Réveil Numérique", pdf: "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf" },
                        { title: "Chapitre 2: Mémoires Fragmentées", pdf: "https://www.africau.edu/images/default/sample.pdf" }
                    ],
                    comments: []
                },
                {
                    id: "m2",
                    title: "Sakura Dreams",
                    author: "Yuki Tanaka",
                    genre: "Romance",
                    cover: "https://picsum.photos/300/400?random=5",
                    description: "Une histoire d'amour touchante entre une artiste et un musicien sous les cerisiers en fleurs. Une romance délicate qui explore les thèmes de la passion et du destin.",
                    chapters: [
                        { title: "Chapitre 1: Première Rencontre", pdf: "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf" }
                    ],
                    comments: []
                }
            ],
            articles: [
                {
                    id: "a1",
                    title: "Les Secrets du Cerveau Humain",
                    author: "Dr. Malika Ondo",
                    genre: "Science",
                    cover: "https://picsum.photos/300/400?random=3",
                    description: "Analyse approfondie du fonctionnement du cerveau et des dernières découvertes en neurosciences. Explorez les mystères de la conscience et les avancées récentes dans la compréhension de l'esprit humain.",
                    pdf: "https://www.africau.edu/images/default/sample.pdf",
                    comments: []
                },
                {
                    id: "a2",
                    title: "L'IA et la Créativité",
                    author: "Dr. Thomas Weber",
                    genre: "Technologie",
                    cover: "https://picsum.photos/300/400?random=6",
                    description: "Comment l'intelligence artificielle transforme le paysage créatif et artistique. Une exploration fascinante de l'intersection entre technologie et art.",
                    pdf: "https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf",
                    comments: []
                }
            ]
        };

        // =============================
        // FONCTIONNALITÉS PDF
        // =============================

        async function loadPDF(url) {
            try {
                document.getElementById('pdfViewer').innerHTML = `
                    <div class="pdf-loading">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Chargement du PDF...</p>
                    </div>
                `;

                const loadingTask = pdfjsLib.getDocument(url);
                currentPdf = await loadingTask.promise;
                
                document.getElementById('pageCount').textContent = currentPdf.numPages;
                currentPageNum = 1;
                await renderPage(currentPageNum);
                
            } catch (error) {
                console.error('Erreur de chargement PDF:', error);
                document.getElementById('pdfViewer').innerHTML = `
                    <div class="pdf-error">
                        <i class="fas fa-exclamation-triangle"></i>
                        <p>Erreur de chargement du PDF</p>
                    </div>
                `;
            }
        }

        async function renderPage(pageNum) {
            if (!currentPdf) return;

            try {
                const page = await currentPdf.getPage(pageNum);
                const viewport = page.getViewport({ scale: currentScale });
                
                const canvas = document.createElement('canvas');
                const context = canvas.getContext('2d');
                canvas.height = viewport.height;
                canvas.width = viewport.width;
                
                const renderContext = {
                    canvasContext: context,
                    viewport: viewport
                };
                
                await page.render(renderContext).promise;
                
                document.getElementById('pdfViewer').innerHTML = '';
                document.getElementById('pdfViewer').appendChild(canvas);
                document.getElementById('pageNum').textContent = pageNum;
                
            } catch (error) {
                console.error('Erreur de rendu de page:', error);
            }
        }

        function nextPage() {
            if (currentPdf && currentPageNum < currentPdf.numPages) {
                currentPageNum++;
                renderPage(currentPageNum);
            }
        }

        function prevPage() {
            if (currentPdf && currentPageNum > 1) {
                currentPageNum--;
                renderPage(currentPageNum);
            }
        }

        function zoomIn() {
            currentScale += 0.2;
            renderPage(currentPageNum);
        }

        function zoomOut() {
            if (currentScale > 0.5) {
                currentScale -= 0.2;
                renderPage(currentPageNum);
            }
        }

        // =============================
        // NAVIGATION ENTRE PAGES
        // =============================
        function showPage(pageId) {
            document.querySelectorAll(".page").forEach(p => p.style.display = "none");
            document.getElementById(pageId).style.display = "block";
            
            document.querySelectorAll(".nav-link").forEach(link => {
                link.classList.remove("active");
            });
            
            if (pageId === "booksPage") {
                renderList("booksPageList", data.books);
            } else if (pageId === "mangaPage") {
                renderList("mangaPageList", data.mangas);
            } else if (pageId === "articlesPage") {
                renderList("articlesPageList", data.articles);
            } else if (pageId === "libraryPage") {
                switchLibraryTab('favorites');
            } else if (pageId === "accountPage") {
                renderHistory();
                updateStats();
            }
        }

        document.querySelectorAll(".nav-link").forEach(btn => {
            btn.addEventListener("click", (e) => {
                e.preventDefault();
                if (btn.id === "accountButton") {
                    showPage("accountPage");
                } else {
                    showPage(btn.dataset.page);
                }
            });
        });

        document.querySelectorAll(".view-all").forEach(link => {
            link.addEventListener("click", (e) => {
                e.preventDefault();
                showPage(link.dataset.page);
            });
        });

        // =============================
        // AFFICHAGE DES LISTES
        // =============================
        function renderList(containerId, items) {
            const container = document.getElementById(containerId);
            if (!container) return;
            
            container.innerHTML = "";

            items.forEach(item => {
                const totalViews = getViews(item.id);
                const isFav = isFavorite(item.id);
                const rating = getRating(item.id);
                
                container.innerHTML += `
                    <div class="item-card" onclick="openDescription('${item.id}')">
                        <img src="${item.cover}" alt="${item.title}">
                        <button class="favorite-btn ${isFav ? 'active' : ''}" onclick="event.stopPropagation(); toggleFavorite('${item.id}'); this.classList.toggle('active')">
                            <i class="fas fa-heart"></i>
                        </button>
                        <div class="card-content">
                            <h3>${item.title}</h3>
                            <p>${item.author}</p>
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                <p class="genre">${item.genre}</p>
                                <span class="views-badge">${totalViews} vues</span>
                            </div>
                            <div class="rating" onclick="event.stopPropagation()">
                                ${[1,2,3,4,5].map(star => `
                                    <i class="fas fa-star ${star <= rating ? 'active' : ''}" 
                                       onclick="rateItem('${item.id}', ${star})"></i>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        // Initialisation des listes
        renderList("booksList", data.books);
        renderList("mangaList", data.mangas);
        renderList("articlesList", data.articles);
        renderList("booksPageList", data.books);
        renderList("mangaPageList", data.mangas);
        renderList("articlesPageList", data.articles);

        // =============================
        // PAGE DESCRIPTION AMÉLIORÉE
        // =============================
        let currentItem = null;

        function openDescription(id) {
            let item = data.books.find(b => b.id === id) ||
                       data.mangas.find(m => m.id === id) ||
                       data.articles.find(a => a.id === id);

            currentItem = item;

            // Mettre à jour l'image de couverture
            document.getElementById('descCover').src = item.cover;
            document.getElementById('descCover').alt = item.title;

            const isFav = isFavorite(item.id);
            const rating = getRating(item.id);

            let html = `
                <div class="book-info">
                    <div style="display: flex; justify-content: space-between; align-items: start;">
                        <h1>${item.title}</h1>
                        <button class="favorite-btn ${isFav ? 'active' : ''}" onclick="toggleFavorite('${item.id}'); this.classList.toggle('active')">
                            <i class="fas fa-heart"></i>
                        </button>
                    </div>
                    <div class="book-meta">
                        <span><b><i class="fas fa-user"></i> Auteur :</b> ${item.author}</span>
                        <span><b><i class="fas fa-tag"></i> Genre :</b> ${item.genre}</span>
                        <span><b><i class="fas fa-eye"></i> Vues :</b> ${getViews(item.id)}</span>
                    </div>
                    <div class="book-description">
                        <p>${item.description}</p>
                    </div>
                    <div style="margin: 20px 0;">
                        <div class="rating">
                            <span style="margin-right: 10px; font-weight: 600;">Votre note :</span>
                            ${[1,2,3,4,5].map(star => `
                                <i class="fas fa-star ${star <= rating ? 'active' : ''}" 
                                   onclick="rateItem('${item.id}', ${star})"></i>
                            `).join('')}
                        </div>
                    </div>
                    <div class="book-actions">
            `;

            if (item.chapters) {
                html += `
                    </div>
                </div>
                <div class="chapters-section">
                    <h2><i class="fas fa-list-ol"></i> Chapitres disponibles</h2>
                `;
                item.chapters.forEach((ch, i) => {
                    const chapterViews = getViews(item.id, i);
                    html += `
                        <button class="chapter-btn" onclick="openChapter('${item.id}', ${i})">
                            <span>${ch.title}</span>
                            <span class="chapter-views">${chapterViews} vues</span>
                        </button>
                    `;
                });
            } else {
                const articleViews = getViews(item.id);
                html += `
                        <button class="btn btn-primary" onclick="openPDF('${item.id}')">
                            <i class="fas fa-book-open"></i> Lire l'article — ${articleViews} vues
                        </button>
                    </div>
                </div>
                `;
            }

            // Commentaires
            html += `
                <div class="comments-section">
                    <h2><i class="fas fa-comments"></i> Commentaires (${item.comments.length})</h2>
                    <div class="comment-form">
                        <textarea id="commentInput" placeholder="Partagez vos impressions sur cette œuvre..."></textarea>
                        <button class="btn btn-primary" onclick="addComment()">
                            <i class="fas fa-paper-plane"></i> Publier le commentaire
                        </button>
                    </div>
                    <div id="comments">
                    </div>
                </div>
            `;

            document.getElementById("descriptionContent").innerHTML = html;
            showPage("descriptionPage");
            renderComments();
        }

        // =============================
        // PDF LECTURE
        // =============================
        function openChapter(itemId, chapterIndex) {
            openPDF(itemId, chapterIndex);
        }

        function openPDF(itemId, chapterIndex = null) {
            let item = data.books.find(b => b.id === itemId) ||
                       data.mangas.find(m => m.id === itemId) ||
                       data.articles.find(a => a.id === itemId);

            currentItem = item;

            // Incrémenter les vues
            incrementViews(itemId, chapterIndex);

            const pdfUrl = chapterIndex !== null ? item.chapters[chapterIndex].pdf : item.pdf;
            const title = chapterIndex !== null ? 
                `${item.title} - ${item.chapters[chapterIndex].title}` : 
                item.title;

            document.getElementById("readerTitle").textContent = title;
            loadPDF(pdfUrl);
            showPage("readerPage");
        }

        // =============================
        // COMMENTAIRES
        // =============================
        function renderComments() {
            const list = document.getElementById("comments");
            if (!list || !currentItem) return;
            
            list.innerHTML = "";

            if (currentItem.comments.length === 0) {
                list.innerHTML = `
                    <div class="comment">
                        <p style="text-align: center; color: var(--gray);">
                            <i class="fas fa-comment-slash"></i><br>
                            Aucun commentaire pour le moment. Soyez le premier à commenter !
                        </p>
                    </div>
                `;
                return;
            }

            currentItem.comments.forEach(c => {
                list.innerHTML += `
                    <div class="comment">
                        <div class="comment-header">
                            <span class="comment-author"><i class="fas fa-user"></i> Lecteur</span>
                            <span class="comment-date">${c.date}</span>
                        </div>
                        <p>${c.text}</p>
                    </div>
                `;
            });
        }

        function addComment() {
            const input = document.getElementById("commentInput");
            if (!input || input.value.trim() === "") {
                showToast('Veuillez écrire un commentaire', 'warning');
                return;
            }

            currentItem.comments.unshift({
                text: input.value,
                date: new Date().toLocaleString('fr-FR')
            });

            input.value = "";
            renderComments();
            updateStats();
            showToast('Commentaire publié !');
        }

        // =============================
        // RECHERCHE
        // =============================
        document.getElementById("searchInput").addEventListener("input", function () {
            const text = this.value.toLowerCase();

            const allItems = [
                ...data.books,
                ...data.mangas,
                ...data.articles
            ];

            const results = allItems.filter(
                i =>
                    i.title.toLowerCase().includes(text) ||
                    i.author.toLowerCase().includes(text) ||
                    i.genre.toLowerCase().includes(text)
            );

            renderList("searchResults", results);
            document.getElementById("resultsCount").textContent = 
                `${results.length} résultat(s) trouvé(s) pour "${this.value}"`;

            if (text.length > 0) {
                showPage("searchPage");
            } else {
                showPage("homePage");
            }
        });

        // =============================
        // COMPTE UTILISATEUR
        // =============================
        function renderHistory() {
            const container = document.getElementById("historyList");
            if (!container) return;
            
            container.innerHTML = "";

            if (userHistory.length === 0) {
                container.innerHTML = `
                    <div class="history-item">
                        <p style="text-align: center; color: var(--gray);">
                            <i class="fas fa-history"></i><br>
                            Aucun historique de lecture pour le moment.
                        </p>
                    </div>
                `;
                return;
            }

            userHistory.forEach(entry => {
                container.innerHTML += `
                    <div class="history-item">
                        <p>📖 <strong>${entry.title}</strong> — <span>${entry.date}</span></p>
                    </div>
                `;
            });
        }

        function updateStats() {
            const totalReads = userHistory.length;
            const favoritesCount = userFavorites.length;
            
            document.getElementById("totalReads").textContent = totalReads;
            document.getElementById("favoritesCount").textContent = favoritesCount;

            const allComments = [
                ...data.books.flatMap(b => b.comments),
                ...data.mangas.flatMap(m => m.comments),
                ...data.articles.flatMap(a => a.comments)
            ];
            document.getElementById("commentsCount").textContent = allComments.length;
        }

        // =============================
        // CAROUSEL HERO AMÉLIORÉ
        // =============================
        let currentSlide = 0;
        const slides = document.querySelectorAll('.hero-slide');
        const indicators = document.querySelectorAll('.indicator');
        const totalSlides = slides.length;

        function showSlide(index) {
            slides.forEach(slide => slide.classList.remove('active'));
            indicators.forEach(indicator => indicator.classList.remove('active'));
            
            slides[index].classList.add('active');
            indicators[index].classList.add('active');
            currentSlide = index;
        }

        function nextSlide() {
            currentSlide = (currentSlide + 1) % totalSlides;
            showSlide(currentSlide);
        }

        function prevSlide() {
            currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
            showSlide(currentSlide);
        }

        // Événements carousel
        document.querySelector('.carousel-control.next').addEventListener('click', nextSlide);
        document.querySelector('.carousel-control.prev').addEventListener('click', prevSlide);

        // Navigation par indicateurs
        indicators.forEach((indicator, index) => {
            indicator.addEventListener('click', () => {
                showSlide(index);
            });
        });

        // Carousel automatique
        let carouselInterval = setInterval(nextSlide, 6000);

        // Pause au survol
        const carousel = document.querySelector('.hero-carousel');
        carousel.addEventListener('mouseenter', () => {
            clearInterval(carouselInterval);
        });

        carousel.addEventListener('mouseleave', () => {
            carouselInterval = setInterval(nextSlide, 6000);
        });

        // =============================
        // INITIALISATION
        // =============================
        document.addEventListener('DOMContentLoaded', function() {
            // Cacher le splash screen après 2 secondes
            setTimeout(() => {
                const splashScreen = document.getElementById('splashScreen');
                splashScreen.style.opacity = '0';
                setTimeout(() => {
                    splashScreen.style.display = 'none';
                }, 500);
            }, 2000);

            // Charger les données utilisateur
            loadUserData();
            
            // Événements des boutons
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
            document.getElementById('themeToggleMobile').addEventListener('click', toggleTheme);
            document.getElementById('favoritesBtn').addEventListener('click', () => {
                showPage('libraryPage');
                switchLibraryTab('favorites');
            });
            
            // Événements des tabs de la bibliothèque
            document.querySelectorAll('.library-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    switchLibraryTab(tab.dataset.tab);
                });
            });
            
            // Afficher la page d'accueil
            showPage('homePage');
            
            // Mettre à jour les statistiques
            updateStats();
            
            // Démarrer le carousel
            showSlide(0);
        });
    </script>
</body>
</html>
