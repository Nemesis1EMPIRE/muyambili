<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ReaderHub — Everything in One File</title>

<!-- ICONS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
/* ------------------- GLOBAL ------------------- */
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #f4f4f4;
}

.page { display: none; padding: 20px; margin-bottom: 80px; }
.page.active { display: block; }

/* ------------------ SIDEBAR DESKTOP ------------------ */
.sidebar {
    position: fixed;
    left: 0; top: 0;
    width: 220px;
    height: 100vh;
    background: #111;
    color: white;
    padding: 20px;
    display: none;
}
.sidebar h2 { margin: 0 0 20px 0; }
.sidebar ul { list-style: none; padding: 0; }
.sidebar li {
    padding: 12px;
    cursor: pointer;
    font-size: 15px;
}
.sidebar li:hover { background: #333; }

/* ------------------ MOBILE BAR ------------------ */
.mobilebar {
    display: flex;
    justify-content: space-around;
    position: fixed;
    bottom: 0;
    width: 100%;
    padding: 12px 0;
    background: #111;
}
.mobilebar i {
    color: white;
    font-size: 24px;
}

/* ------------------ CONTENT ------------------ */
#page-content { padding: 20px; }
.card {
    background: white;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 12px;
}

/* Search */
.search-box {
    display: flex;
    gap: 10px;
    margin: 15px 0;
}
.search-box input {
    flex: 1;
    padding: 10px;
    border-radius: 6px;
    border: 1px solid #aaa;
}

/* Carousel */
.carousel img {
    width: 100%;
    height: 200px;
    border-radius: 10px;
    object-fit: cover;
}

/* Desktop mode */
@media screen and (min-width: 800px) {
    .sidebar { display: block; }
    .mobilebar { display: none; }
    #page-content { margin-left: 250px; }
}
</style>

</head>
<body>

<!-- =================== SIDEBAR (DESKTOP) =================== -->
<nav class="sidebar">
    <h2>ReaderHub</h2>
    <ul>
        <li onclick="go('home')"><i class="fa fa-home"></i> Accueil</li>
        <li onclick="go('books')"><i class="fa fa-book"></i> Livres</li>
        <li onclick="go('manga')"><i class="fa fa-dragon"></i> Mangas</li>
        <li onclick="go('articles')"><i class="fa fa-newspaper"></i> Articles</li>
        <li onclick="go('account')"><i class="fa fa-user"></i> Mon Compte</li>
    </ul>
</nav>

<!-- =================== MOBILE BAR =================== -->
<nav class="mobilebar">
    <i class="fa fa-home" onclick="go('home')"></i>
    <i class="fa fa-book" onclick="go('books')"></i>
    <i class="fa fa-dragon" onclick="go('manga')"></i>
    <i class="fa fa-newspaper" onclick="go('articles')"></i>
    <i class="fa fa-user" onclick="go('account')"></i>
</nav>

<!-- =================== MAIN CONTENT =================== -->
<div id="page-content">

<!-- HOME -->
<section id="home" class="page active">
    <h1>Bienvenue sur ReaderHub</h1>

    <div class="search-box">
        <input id="searchInput" type="text" placeholder="Rechercher titre, auteur, genre...">
        <button onclick="search()">Rechercher</button>
    </div>

    <h2>Carrousel</h2>
    <div class="carousel">
        <img id="carousel-img" src="https://picsum.photos/800/300?random=1">
    </div>

    <h2>Résultats</h2>
    <div id="searchResults"></div>
</section>

<!-- BOOKS -->
<section id="books" class="page">
    <h1>Livres</h1>
    <div id="books-list"></div>
</section>

<!-- MANGA -->
<section id="manga" class="page">
    <h1>Mangas</h1>
    <div id="manga-list"></div>
</section>

<!-- ARTICLES -->
<section id="articles" class="page">
    <h1>Articles</h1>
    <div id="articles-list"></div>
</section>

<!-- DESCRIPTION -->
<section id="description" class="page">
    <div id="descriptionContent"></div>
</section>

<!-- READING -->
<section id="chapter" class="page">
    <h1 id="chapterTitle"></h1>
    <p id="chapterContent"></p>

    <p><strong>Vues :</strong> <span id="chapterViews"></span></p>

    <h3>Commentaires :</h3>
    <div id="commentList"></div>

    <textarea id="commentInput" placeholder="Votre commentaire..." style="width:100%;height:80px;"></textarea>
    <button onclick="addComment()">Publier</button>
</section>

<!-- ACCOUNT -->
<section id="account" class="page">
    <h1>Historique de lecture</h1>
    <div id="historyList"></div>
</section>

</div>

<!-- =================== SCRIPT =================== -->
<script>
// Database (allowed to invent)
const items = [
    {id:1, type:"book", title:"La Forêt Rouge", author:"A. Mavoungou", genre:"Fantasy", description:"Une aventure magique..."},
    {id:2, type:"manga", title:"Shadow Blade", author:"Kenji Moro", genre:"Action", description:"Un ninja traqué..."},
    {id:3, type:"article", title:"L'Histoire du Web", author:"J. Bernard", genre:"Tech", description:"De 1990 à nos jours..."}
];

/* ------------------ NAVIGATION ------------------ */
function go(page) {
    document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
    document.getElementById(page).classList.add("active");
}

/* ------------------ CAROUSEL ------------------ */
let carIndex = 1;
setInterval(() => {
    carIndex++;
    document.getElementById("carousel-img").src = `https://picsum.photos/800/300?random=${carIndex}`;
}, 3000);

/* ------------------ LIST DISPLAY ------------------ */
function fillLists() {
    fill("books-list", "book");
    fill("manga-list", "manga");
    fill("articles-list", "article");
}
function fill(container, type) {
    const c = document.getElementById(container);
    c.innerHTML = "";
    items.filter(i => i.type === type).forEach(i => {
        c.innerHTML += `
            <div class="card" onclick="openDescription(${i.id})">
                <h3>${i.title}</h3>
                <p>${i.author}</p>
                <small>${i.genre}</small>
            </div>`;
    });
}
fillLists();

/* ------------------ SEARCH ------------------ */
function search() {
    const q = document.getElementById("searchInput").value.toLowerCase();
    const results = items.filter(i =>
        i.title.toLowerCase().includes(q) ||
        i.author.toLowerCase().includes(q) ||
        i.genre.toLowerCase().includes(q)
    );

    const box = document.getElementById("searchResults");
    box.innerHTML = "";

    results.forEach(r => {
        box.innerHTML += `
            <div class="card" onclick="openDescription(${r.id})">
                <h3>${r.title}</h3>
                <p>${r.author}</p>
                <small>${r.genre}</small>
            </div>`;
    });
}

/* ------------------ DESCRIPTION ------------------ */
function openDescription(id) {
    const item = items.find(i => i.id === id);
    go("description");

    document.getElementById("descriptionContent").innerHTML = `
        <h1>${item.title}</h1>
        <p>${item.description}</p>
        <button onclick="openChapter(${id})">Lire Chapitre 1</button>
    `;
}

/* ------------------ CHAPTER READING ------------------ */
let current = null;

function openChapter(id) {
    current = id;
    go("chapter");

    const item = items.find(i => i.id === id);

    // VUES
    let views = JSON.parse(localStorage.getItem("views_" + id)) || 0;
    views++;
    localStorage.setItem("views_" + id, JSON.stringify(views));

    document.getElementById("chapterTitle").innerText = item.title;
    document.getElementById("chapterContent").innerText = "Contenu du chapitre...";
    document.getElementById("chapterViews").innerText = views;

    // Historique
    let h = JSON.parse(localStorage.getItem("history")) || [];
    h.unshift(item.title);
    localStorage.setItem("history", JSON.stringify(h));

    loadComments();
}

/* ------------------ COMMENTS ------------------ */
function loadComments() {
    const key = "comments_" + current;
    const list = JSON.parse(localStorage.getItem(key)) || [];
    document.getElementById("commentList").innerHTML =
        list.map(c => `<p>• ${c}</p>`).join("");
}

function addComment() {
    const text = document.getElementById("commentInput").value;
    if (!text.trim()) return;

    const key = "comments_" + current;
    let comments = JSON.parse(localStorage.getItem(key)) || [];
    comments.push(text);
    localStorage.setItem(key, JSON.stringify(comments));

    loadComments();
    document.getElementById("commentInput").value = "";
}

/* ------------------ HISTORY ------------------ */
setInterval(() => {
    let h = JSON.parse(localStorage.getItem("history")) || [];
    document.getElementById("historyList").innerHTML =
        h.map(i => `<p>• ${i}</p>`).join("");
}, 1000);

</script>
</body>
</html>
